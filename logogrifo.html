<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Logogrifo</title>

    <style>
        td {
            text-align: center
        }

        body {
            background-color: rgb(218, 249, 255);
            font-family: arial;
        }

        h1 {
            text-align: center;
            text-decoration: underline;
        }
        input{
            text-align: center;
        }
    </style>

    <script src="dicjson.js"></script>
</head>

<body>

    <h1>Logogrifo</h1>

    <script>
        var diccionario = JSON.parse(datos);
        var palabrasCon10 = separarPalabras(10, diccionario);
        var palabrasCon9 = separarPalabras(9, diccionario);
        var palabrasCon8 = separarPalabras(8, diccionario);
        var palabrasCon7 = separarPalabras(7, diccionario);
        var palabrasCon6 = separarPalabras(6, diccionario);
        var palabrasCon5 = separarPalabras(5, diccionario);
        var palabrasCon4 = separarPalabras(4, diccionario);

        var palabrasTotal = [palabrasCon10, palabrasCon9, palabrasCon8, palabrasCon7, palabrasCon6, palabrasCon5, palabrasCon4];

        var arrayPalabras = obtenerPalabrasJuego(palabrasTotal);
        var arrayDefiniciones = obtenerDefiniciones(arrayPalabras, diccionario);
        var letrasDiferentesCont = 0;
        var letrasDifArray = new Array();

        for (var z = 0; z < arrayPalabras.length; z++) {
            var palabra = arrayPalabras[z];
            palabra = palabra.toUpperCase();

            for (var x = 0; x < palabra.length; x++) {

                var igual = false;

                var letra = palabra.charAt(x);

                for (var y = 0; y < letrasDifArray.length; y++) {

                    if (letra == letrasDifArray[y]) {
                        igual = true;
                        break;
                    }

                }

                if (!igual) {
                    letrasDifArray[letrasDiferentesCont] = letra;
                    letrasDiferentesCont++;
                }

            }

            document.write("<table><tr>");
            for (var x = 0; x < palabra.length; x++) {

                for (var y = 0; y < letrasDifArray.length; y++) {

                    if (palabra.charAt(x) == letrasDifArray[y]) {
                        y++;
                        document.write('<td>' + y + '</td>');
                        y--;
                    }

                }

            }

            document.write("</tr><tr>");

            for (var x = 0; x < palabra.length; x++) {

                for (var y = 0; y < letrasDifArray.length; y++) {

                    if (palabra.charAt(x) == letrasDifArray[y]) {

                        document.write('<td><input size="1" maxlength="1" id="' + palabra.charAt(x) + '"></input></td>');

                    }

                }

            }

            document.write("</tr></table>" + arrayDefiniciones[z] + "<br><br>");
        }

        function separarPalabras(longitud, diccionario) {

            var palabrasEncontradas = new Array();
            var cont = 0;

            for (var x = 0; x < diccionario.length; x++) {

                if (diccionario[x].palabra.length == longitud) {
                    palabrasEncontradas[cont] = diccionario[x].palabra;
                    cont++;
                }

            }

            return palabrasEncontradas;

        }

        function obtenerPalabrasJuego(palabrasSeleccionadas) {

            //OBTENER UN NUMERO ALEATORIO POR CADA ARRAY
            var array = new Array();
            var cont = 0;

            for (var x = 0; x < palabrasSeleccionadas.length; x++) {

                var words = palabrasSeleccionadas[x];

                var vMin = 0;
                var vMax = words.length;
                vMax--;

                var rndm = Math.floor(Math.random() * (vMax - vMin + 1) + vMin);

                array[cont] = words[rndm];
                cont++;

            }
            return array;
        }

        function obtenerDefiniciones(palabras, diccionario) {
            var definiciones = new Array();
            var cont = 0;

            for (var x = 0; x < palabras.length; x++) {

                for (var y = 0; y < diccionario.length; y++) {

                    if (palabras[x] == diccionario[y].palabra) {

                        definiciones[cont] = diccionario[y].definicion;
                        cont++;
                        break;

                    }

                }

            }

            return definiciones;
        }


    </script>


    <button onclick="comprobarPalabras()">Corregir</button>
    <button onclick="location.reload()" hidden>Jugar de nuevo</button>

    <script>
        function comprobarPalabras() {

            var correcto = true;

            var listaInputs = document.getElementsByTagName("input");

            for (var x = 0; x < listaInputs.length; x++) {

                if (listaInputs[x].value.toUpperCase() != listaInputs[x].id) {
                    //listaInputs[x].style.backgroundColor="rgb(255, 116, 116)";
                    listaInputs[x].style.borderColor = "rgb(255, 116, 116)";
                    correcto = false;

                } else if (listaInputs[x].value.toUpperCase() == listaInputs[x].id) {
                    //listaInputs[x].style.backgroundColor="rgb(127, 253, 115)";
                    listaInputs[x].style.borderColor = "rgb(127, 253, 115)";
                }

            }


            if (correcto) {
                alert("Enhorabuena, has ganado");

                deshabilitarInput(listaInputs);
                var boton = document.getElementsByTagName("button");
                boton[0].disabled = true;
                boton[1].hidden = false;

            }

        }

        function deshabilitarInput(inputs) {

            for (var x = 0; x < inputs.length; x++) {
                inputs[x].disabled = true;
            }

        }

    </script>

</body>

</html>